close all
clear
clc

load cij_all_edge_linear.mat
load cij_all_node_linear.mat
load x_all_node_ada.mat
load x_all_edge_ada.mat
rgbTriplet =  [0.00, 0.36, 0.67;...
    0.68, 0.42, 0.89;...
    0.44, 0.62, 0.98;...
    0.10, 0.67, 0.59;...
    0.99, 0.57, 0.59;...
    0.28, 0.55, 0.86;...
    0.96, 0.62, 0.24;...
    0.30, 0.90, 0.56;...
    0.12, 0.46, 0.71;...
    0.46, 0.63, 0.90;...
    0.96, 0.37, 0.40;...
    0.14, 0.76, 0.71;...
    0.99, 0.50, 0.02;...
    0.00, 0.57, 0.76;...
    0.35, 0.90, 0.89;...
    0.17, 0.62, 0.47;...
    0.21, 0.21, 0.67;...
    0.99, 0.49, 0.00;...
    0.98, 0.74, 0.44;...
    0.97, 0.60, 0.58;...
    0.18, 0.62, 0.17;...
    0.68, 0.87, 0.53;...
    0.12, 0.46, 0.70;...
    0.65, 0.79, 0.89;...
    0.95, 0.99, 0.69;...
    0.74, 0.92, 0.68;...
    0.37, 0.81, 0.72;...
    0.01, 0.72, 0.77];

dt = 0.0001;
Ts = 30;
color = [0    0.4470    0.7410
    0.8500    0.3250    0.0980
    0.9290    0.6940    0.1250
    0.4940    0.1840    0.5560
    0.4660    0.6740    0.1880
    0.3010    0.7450    0.9330
    0.6350    0.0780    0.1840
    0.87      0.45      0
    %0.07      0.62      1
    %1         0.41      0.16
    ];
color = kron(color,[1;1;1;1]);
N = 8;
nx = 4;

subplot(3,2,1);
for i=1:N*nx
    plot(0:dt:Ts,x_all_node_ada(1:1:end,i),'-','color',color(i,:),'linewidth',1)
    hold on
end
% plot(0:dt:Ts,x_all_node_ada(:,1:1:end),'-','linewidth',1)
xlabel('$t$','Interpreter','Latex');ylabel(strcat('${x}_{i}$'),'Interpreter','Latex');
text(10,4,strcat('$x_{i,3}$'),'Interpreter','Latex','FontSize',12,'Color',[0 0 0],'FontWeight','bold');
text(15,2.5,strcat('$x_{i,1}$'),'Interpreter','Latex','FontSize',12,'Color',[0 0 0],'FontWeight','bold');
text(20,0.8,strcat('$x_{i,4}$'),'Interpreter','Latex','FontSize',12,'Color',[0 0 0],'FontWeight','bold');
text(25,-0.3,strcat('$x_{i,2}$'),'Interpreter','Latex','FontSize',12,'Color',[0 0 0],'FontWeight','bold');
title('A: States in the Node-based Case','FontName','Times','FontSize',10,'FontWeight','bold')
pbaspect([1.2 1 1])

subplot(3,2,2);
for i=1:N*nx
    plot(0:dt:Ts,x_all_based_ada(1:1:end,i),'-','color',color(i,:),'linewidth',1)
    hold on
end
% plot(0:dt:Ts,x_all_based_ada(:,1:1:end),'-','linewidth',1)
xlabel('$t$','Interpreter','Latex');ylabel(strcat('${x}_{i}$'),'Interpreter','Latex');
text(10,4,strcat('$x_{i,3}$'),'Interpreter','Latex','FontSize',12,'Color',[0 0 0],'FontWeight','bold');
text(15,2.5,strcat('$x_{i,1}$'),'Interpreter','Latex','FontSize',12,'Color',[0 0 0],'FontWeight','bold');
text(20,0.8,strcat('$x_{i,4}$'),'Interpreter','Latex','FontSize',12,'Color',[0 0 0],'FontWeight','bold');
text(25,-0.3,strcat('$x_{i,2}$'),'Interpreter','Latex','FontSize',12,'Color',[0 0 0],'FontWeight','bold');
title('B: States in the Edge-based Case','FontName','Times','FontSize',10,'FontWeight','bold')
pbaspect([1.2 1 1])

color = [0.00, 0.36, 0.67;...
    0.68, 0.42, 0.89;...
    0.44, 0.62, 0.98;...
    0.10, 0.67, 0.59;...
    0.99, 0.57, 0.59;...
    0.28, 0.55, 0.86;...
    0.96, 0.62, 0.24;...
    0.30, 0.90, 0.56;...
    0.12, 0.46, 0.71;...
    0.46, 0.63, 0.90;...
    0.96, 0.37, 0.40;...
    0.14, 0.76, 0.71;...
    0.99, 0.50, 0.02;...
    0.00, 0.57, 0.76;...
    0.35, 0.90, 0.89;...
    0.17, 0.62, 0.47;...
    0.21, 0.21, 0.67;...
    0.99, 0.49, 0.00;...
    0.98, 0.74, 0.44;...
    0.97, 0.60, 0.58;...
    0.18, 0.62, 0.17;...
    0.68, 0.87, 0.53;...
    0.12, 0.46, 0.70;...
    0.65, 0.79, 0.89;...
    0.95, 0.99, 0.69;...
    0.74, 0.92, 0.68;...
    0.37, 0.81, 0.72;...
    0.01, 0.72, 0.77];

subplot(3,2,[3,4]);
for i=1:20
    plot(0:dt:Ts,c_all_node_based(1:1:end,i),'-','color',color(i,:),'linewidth',1)
    hold on
end
% plot(0:dt:Ts,c_all_node_based(:,1:1:end),'-','linewidth',1)
xlabel('$t$','Interpreter','Latex');ylabel(strcat('$c_{ij}$'),'Interpreter','Latex');
ylim([0,3])
title('C: Adaptive Gains in the Node-based Case','FontName','Times','FontSize',10,'FontWeight','bold')
box on
%pbaspect([2 1 1])

subplot(3,2,[5,6]);
for i=1:20
    plot(0:dt:Ts,c_all_edge_based(1:1:end,i),'-','color',color(i,:),'linewidth',1)
    hold on
end
% plot(0:dt:Ts,c_all_edge_based(:,1:1:end),'-','linewidth',1)
ylim([0,3.2])
xlabel('$t$','Interpreter','Latex');ylabel(strcat('$\tilde{c}_{ij}$'),'Interpreter','Latex');
title('D: Adaptive Gains in the Edge-based Case','FontName','Times','FontSize',10,'FontWeight','bold')
box on
%pbaspect([2 1 1])
% legend('Agent 1','Agent 2','Agent 3','Agent 4','Agent 5','Agent 6','Agent 7','Agent 8','FontName','Times','FontSize',8,'NumColumns',3,'FontWeight','bold','Location','southeast')
